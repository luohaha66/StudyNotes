# 笔记

## 4.1.1 计数器

- 内核维护了各种统计数据，称为计数器，用于对事件进行计数，计数器的使用可以认为是零开销的。
- 系统级别：
  - vmstat：虚拟内存和物理内存的统计。
  - mpstat：每个CPU的使用情况。
  - iostat：每个磁盘I/O的使用情况，由块设备接口报告。
  - netstat：网络接口的统计，TCP/IP栈的统计。
  - sar：各种各样的统计。
- 进程级别
  - ps：进程状态。
  - top：按某个统计数据jinxingpaixui。
  - pmap：将进程的的内存段和使用统计一起列出。
  - 上述这些工具是从/proc读取统计信息。

## 4.1.2 跟踪

- 跟踪收集每一个事件的数据以供分析。
- 系统级别：
  - tcpdump：网络包跟踪。
  - blktrace：块I/O跟踪。
  - dtrace，systemtap：跟踪内核的内部活动和所有资源的使用情况，支持静态动态跟踪。
  - perf。
- 进程级别：
  - strace：系统调用跟踪。
  - gdb：调试器。

## 4.2 观测来源

- 系统性能统计的主要来源是：/proc，/sys和kstat。

## 4.2.1 /proc

- 在内存中运行。
- 以进程ID命名的名录对应相关进程。

## 4.2.2 /sys

- sysfs文件系统，挂载至/sys。
- 提供了系统中所有的统计类型
