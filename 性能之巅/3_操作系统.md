# 笔记

## 术语

- 上下文切换：内核切换CPU让其在不同的地址空间上操作。
- 自陷：信号发送到内核，请求执行一段系统程序，包括系统调用，处理器异常以及中断。

## 3.2.1 内核

- I/O执行频繁的工作负载，会经常执行在内核上下文中，计算密集型的工作负载则会尽量的不打扰到内核，因此他们能不中断的在CPU上运行。
- 内核是唯一运行在特殊CPU模式的程序，被称为内核态。
- 用户程序（进程）运行在用户态，对于内核特权操作的请求通过系统调用传递。
- 无论是内核态还是用户态，都有自己的软件执行上下文，包括栈和寄存器。
- 不同的状态切换上下文是会消耗CPU周期的。
- 上下文切换也会发生在不同进程之间。例如CPU调度时。

## 3.2.2 栈

- 在执行系统调用时，一个进程的线程有两个栈：一个用户级别的栈和一个内核级别的栈。

## 3.2.3 中断

- 中断：从中断开始到中断被服务之间的时间叫做中断延时。
- 中断优先级表示当前活跃的中断服务程序的优先级。

## 3.2.5 进程

- 进程是用以执行用户级别程序的环境，包括地址空间，文件描述符，线程栈和寄存器。
- 线程是一个可执行的上下文，包括栈，寄存器以及程序计数器。
- 进程环境包括进程地址空间内的数据和内核上下文。
- 内核上下文包含了各种进程的属性和统计信息。
- 每一个线程都有一些元数据，包括在内核上下文里自己的优先级以及在用户地址空间里自己的栈。

## 3.2.10 文件系统

- 基于存储设备的文件系统，从用户级软件到存储设备的路径被称为I/O栈。
